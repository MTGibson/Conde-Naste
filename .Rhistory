html_text() %>%
readr::parse_character()
salary <- conde_nast %>%
html_nodes(".s13:nth-child(3)") %>%
html_text() %>%
readr::parse_number(na = c("", NA))
race <- conde_nast %>%
html_nodes(".s12:nth-child(4)") %>%
html_text() %>%
readr::parse_character()
gender <- conde_nast %>%
html_nodes(".s12:nth-child(5)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
sex_orien <- conde_nast %>%
html_nodes(".s12:nth-child(6)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
status <- conde_nast %>%
html_nodes(".s12:nth-child(7)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
yrs_role <- conde_nast %>%
html_nodes(".s13:nth-child(8)") %>%
html_text() %>%
readr::parse_number(na = c("", "NA"))
yrs_exp <- conde_nast %>%
html_nodes(".s13:nth-child(8)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
reports_ind <- conde_nast %>%
html_nodes(".s13:nth-child(10)") %>%
html_text() %>%
readr::parse_number(na = c("","-", NA))
reports_ind <- conde_nast %>%
html_nodes(".s13:nth-child(10)") %>%
html_text() %>%
readr::parse_number(na = c("","-", "NA"))
reports_dir <- conde_nast %>%
html_nodes(".s13:nth-child(11)") %>%
html_text() %>%
readr::parse_number(na = c("-", NA))
rm(list=ls())
library('dplyr')
library('tidyr')
library('rvest')
library('ggplot2')
library('tidyverse')
setwd("/Users/michaelgibson/Documents/GitHub/Conde-Naste")
conde_nast <- read_html("https://docs.google.com/spreadsheets/u/1/d/1YqdJCJ3LmtVIzxsgOj-YhE8fGBQ3zhuEkWp-_og2HEE/htmlview?pru=AAABcsoMglg*NgqVwN1JSbezwnZ9b6PYNg")
title <- conde_nast %>%
html_nodes(".s12:nth-child(2)") %>%
html_text() %>%
readr::parse_character()
salary <- conde_nast %>%
html_nodes(".s13:nth-child(3)") %>%
html_text() %>%
readr::parse_number(na = c("", NA))
race <- conde_nast %>%
html_nodes(".s12:nth-child(4)") %>%
html_text() %>%
readr::parse_character()
gender <- conde_nast %>%
html_nodes(".s12:nth-child(5)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
sex_orien <- conde_nast %>%
html_nodes(".s12:nth-child(6)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
status <- conde_nast %>%
html_nodes(".s12:nth-child(7)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
yrs_role <- conde_nast %>%
html_nodes(".s13:nth-child(8)") %>%
html_text() %>%
readr::parse_number(na = c("", "NA"))
yrs_exp <- conde_nast %>%
html_nodes(".s13:nth-child(8)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
reports_ind <- conde_nast %>%
html_nodes(".s13:nth-child(10)") %>%
html_text() %>%
readr::parse_number(na = c("","-", "NA"))
reports_dir <- conde_nast %>%
html_nodes(".s13:nth-child(11)") %>%
html_text() %>%
readr::parse_number(na = c("","-", "NA"))
rm(list=ls())
library('dplyr')
library('tidyr')
library('rvest')
library('ggplot2')
library('tidyverse')
setwd("/Users/michaelgibson/Documents/GitHub/Conde-Naste")
conde_nast <- read_html("https://docs.google.com/spreadsheets/u/1/d/1YqdJCJ3LmtVIzxsgOj-YhE8fGBQ3zhuEkWp-_og2HEE/htmlview?pru=AAABcsoMglg*NgqVwN1JSbezwnZ9b6PYNg")
title <- conde_nast %>%
html_nodes(".s12:nth-child(2)") %>%
html_text() %>%
readr::parse_character()
salary <- conde_nast %>%
html_nodes(".s13:nth-child(3)") %>%
html_text() %>%
readr::parse_number(na = c("", NA))
race <- conde_nast %>%
html_nodes(".s12:nth-child(4)") %>%
html_text() %>%
readr::parse_character()
gender <- conde_nast %>%
html_nodes(".s12:nth-child(5)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
sex_orien <- conde_nast %>%
html_nodes(".s12:nth-child(6)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
status <- conde_nast %>%
html_nodes(".s12:nth-child(7)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
yrs_role <- conde_nast %>%
html_nodes(".s13:nth-child(8)") %>%
html_text() %>%
readr::parse_number(na = c("", "NA"))
yrs_exp <- conde_nast %>%
html_nodes(".s13:nth-child(8)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
reports_ind <- conde_nast %>%
html_nodes(".s13:nth-child(10)") %>%
html_text() %>%
readr::parse_number(na = c("","-"))
reports_dir <- conde_nast %>%
html_nodes(".s13:nth-child(11)") %>%
html_text() %>%
readr::parse_number(na = c("","-"))
reports_dir
other <- conde_nast %>%
html_nodes(".s14:nth-child(13)") %>%
html_text() %>%
readr::parse_character()
add_comp <- conde_nast %>%
html_nodes(".s12:nth-child(12)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
other <- conde_nast %>%
html_nodes(".s12:nth-child(13)") %>%
html_text() %>%
readr::parse_character()
add_comp
raw <- data_frame(title, salary, gender, race, sex_orien, yrs_exp, yrs_role)
write.csv(raw,'raw_cn.csv')
rm(list=ls())
library('dplyr')
library('tidyr')
library('rvest')
library('ggplot2')
library('tidyverse')
setwd("/Users/michaelgibson/Documents/GitHub/Conde-Naste")
raw<-read.csv("raw_cn.csv")
View(raw)
help(ifelse)
raw$male<-ifelse(str_contains(raw$gender, "Man"),1,0)
install.packages("sjmisc")
rm(list=ls())
library('dplyr')
library('tidyr')
library('rvest')
library('ggplot2')
library('tidyverse')
library('sjmisc')
setwd("/Users/michaelgibson/Documents/GitHub/Conde-Naste")
raw<-read.csv("raw_cn.csv")
raw$male<-ifelse(str_contains(raw$gender, "Man"),1,0)
raw$male<-ifelse(str_contains(raw$gender, "Man",ignore.case=FALSE),1,0)
raw$male<-ifelse(str_contains(raw$gender, "Man",ignore.case=FALSE),1,0)
raw$test<-(str_contains(raw$gender, "Man",ignore.case=FALSE)
raw$test<-str_contains(raw$gender, "Man",ignore.case=FALSE)
raw$test<-str_contains(raw$gender, "Man",ignore.case=FALSE)
raw$male<-ifelse(str_contains(raw$gender, "Man",ignore.case=FALSE)==TRUE,1,0)
raw$female<-ifelse(str_contains(raw$gender, "Woman",ignore.case=FALSE)==TRUE,1,0)
raw$test<-str_contains(raw$gender, "Woman",ignore.case=FALSE)
raw$test<-str_contains(raw$gender, "Woman",ignore.case=FALSE)
rm(list=ls())
library('dplyr')
library('tidyr')
library('rvest')
library('ggplot2')
library('tidyverse')
library('sjmisc')
setwd("/Users/michaelgibson/Documents/GitHub/Conde-Naste")
raw<-read.csv("raw_cn.csv")
raw$test<-str_contains(raw$gender, "Woman",ignore.case=FALSE)
raw$test<-grep(raw$gender, "Woman",ignore.case=FALSE)
raw$male<-ifelse(raw$gender==("Man (cisgender)"|"Man (transgender)"),1,0)
raw$male<-ifelse(raw$gender=="Man (cisgender)"|raw$gender=="Man (transgender)",1,0)
raw$straight<-ifelse(raw$sex_orien=="Straight",1,0)
raw$cisgendered<-ifelse(raw$gender=="Man (cisgender)"|raw$gender=="Woman (cisgender)",1,0)
summary(raw$male)
summary(raw$straight)
summary(raw$cisgendered)
rm(list=ls())
library('dplyr')
library('tidyr')
library('rvest')
library('ggplot2')
library('tidyverse')
library('sjmisc')
setwd("/Users/michaelgibson/Documents/GitHub/Conde-Naste")
raw<-read.csv("raw_cn.csv")
raw$male<-ifelse(raw$gender=="Man (cisgender)"|raw$gender=="Man (transgender)",1,0)
raw$straight<-ifelse(raw$sex_orien=="Straight",1,0)
raw$cisgendered<-ifelse(raw$gender=="Man (cisgender)"|raw$gender=="Woman (cisgender)",1,0)
summary(raw$male)
summary(raw$straight)
summary(raw$cisgendered)
rm(list=ls())
library('dplyr')
library('tidyr')
library('rvest')
library('ggplot2')
library('tidyverse')
setwd("/Users/michaelgibson/Documents/GitHub/Conde-Naste")
conde_nast <- read_html("https://docs.google.com/spreadsheets/u/1/d/1YqdJCJ3LmtVIzxsgOj-YhE8fGBQ3zhuEkWp-_og2HEE/htmlview?pru=AAABcsoMglg*NgqVwN1JSbezwnZ9b6PYNg")
title <- conde_nast %>%
html_nodes(".s12:nth-child(2)") %>%
html_text() %>%
readr::parse_character()
salary <- conde_nast %>%
html_nodes(".s13:nth-child(3)") %>%
html_text() %>%
readr::parse_number(na = c("", NA))
race <- conde_nast %>%
html_nodes(".s12:nth-child(4)") %>%
html_text() %>%
readr::parse_character()
gender <- conde_nast %>%
html_nodes(".s12:nth-child(5)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
sex_orien <- conde_nast %>%
html_nodes(".s12:nth-child(6)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
status <- conde_nast %>%
html_nodes(".s12:nth-child(7)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
yrs_role <- conde_nast %>%
html_nodes(".s13:nth-child(8)") %>%
html_text() %>%
readr::parse_number(na = c("", "NA"))
yrs_exp <- conde_nast %>%
html_nodes(".s13:nth-child(9)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
reports_ind <- conde_nast %>%
html_nodes(".s13:nth-child(10)") %>%
html_text() %>%
readr::parse_number(na = c("","-"))
reports_dir <- conde_nast %>%
html_nodes(".s13:nth-child(11)") %>%
html_text() %>%
readr::parse_number(na = c("","-"))
#add_comp <- conde_nast %>%
#  html_nodes(".s12:nth-child(12)") %>%
#  html_text() %>%
#  readr::parse_character(na = c("", "NA"))
#other <- conde_nast %>%
#  html_nodes(".s12:nth-child(13)") %>%
#  html_text() %>%
#  readr::parse_character()
#combined <- data_frame(title, salary, gender, race, sex_orien, yrs_exp, yrs_role, add_comp, reports_dir, reports_ind, other)
raw <- data_frame(title, salary, gender, race, sex_orien, yrs_exp, yrs_role)
write.csv(raw,'raw_cn.csv')
yrs_exp <- conde_nast %>%
html_nodes(".s13:nth-child(9)") %>%
html_text() %>%
readr::parse_number(na = c("", "NA"))
rm(list=ls())
library('dplyr')
library('tidyr')
library('rvest')
library('ggplot2')
library('tidyverse')
setwd("/Users/michaelgibson/Documents/GitHub/Conde-Naste")
conde_nast <- read_html("https://docs.google.com/spreadsheets/u/1/d/1YqdJCJ3LmtVIzxsgOj-YhE8fGBQ3zhuEkWp-_og2HEE/htmlview?pru=AAABcsoMglg*NgqVwN1JSbezwnZ9b6PYNg")
title <- conde_nast %>%
html_nodes(".s12:nth-child(2)") %>%
html_text() %>%
readr::parse_character()
salary <- conde_nast %>%
html_nodes(".s13:nth-child(3)") %>%
html_text() %>%
readr::parse_number(na = c("", NA))
race <- conde_nast %>%
html_nodes(".s12:nth-child(4)") %>%
html_text() %>%
readr::parse_character()
gender <- conde_nast %>%
html_nodes(".s12:nth-child(5)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
sex_orien <- conde_nast %>%
html_nodes(".s12:nth-child(6)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
status <- conde_nast %>%
html_nodes(".s12:nth-child(7)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
yrs_role <- conde_nast %>%
html_nodes(".s13:nth-child(8)") %>%
html_text() %>%
readr::parse_number(na = c("", "NA"))
yrs_exp <- conde_nast %>%
html_nodes(".s13:nth-child(9)") %>%
html_text() %>%
readr::parse_number(na = c("", "NA"))
yrs_exp <- conde_nast %>%
html_nodes(".s13:nth-child(9)") %>%
html_text() %>%
readr::parse_number(na = c("", "NA","20 or more"))
rm(list=ls())
library('dplyr')
library('tidyr')
library('rvest')
library('ggplot2')
library('tidyverse')
setwd("/Users/michaelgibson/Documents/GitHub/Conde-Naste")
conde_nast <- read_html("https://docs.google.com/spreadsheets/u/1/d/1YqdJCJ3LmtVIzxsgOj-YhE8fGBQ3zhuEkWp-_og2HEE/htmlview?pru=AAABcsoMglg*NgqVwN1JSbezwnZ9b6PYNg")
title <- conde_nast %>%
html_nodes(".s12:nth-child(2)") %>%
html_text() %>%
readr::parse_character()
salary <- conde_nast %>%
html_nodes(".s13:nth-child(3)") %>%
html_text() %>%
readr::parse_number(na = c("", NA))
race <- conde_nast %>%
html_nodes(".s12:nth-child(4)") %>%
html_text() %>%
readr::parse_character()
gender <- conde_nast %>%
html_nodes(".s12:nth-child(5)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
sex_orien <- conde_nast %>%
html_nodes(".s12:nth-child(6)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
status <- conde_nast %>%
html_nodes(".s12:nth-child(7)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
yrs_role <- conde_nast %>%
html_nodes(".s13:nth-child(8)") %>%
html_text() %>%
readr::parse_number(na = c("", "NA"))
yrs_exp <- conde_nast %>%
html_nodes(".s13:nth-child(9)") %>%
html_text() %>%
readr::parse_number(na = c("", "NA","20 or more"))
yrs_exp
yrs_exp <- conde_nast %>%
html_nodes(".s13:nth-child(9)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA","20 or more"))
yrs_exp
yrs_exp <- conde_nast %>%
html_nodes(".s13:nth-child(9)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
rm(list=ls())
library('dplyr')
library('tidyr')
library('rvest')
library('ggplot2')
library('tidyverse')
setwd("/Users/michaelgibson/Documents/GitHub/Conde-Naste")
conde_nast <- read_html("https://docs.google.com/spreadsheets/u/1/d/1YqdJCJ3LmtVIzxsgOj-YhE8fGBQ3zhuEkWp-_og2HEE/htmlview?pru=AAABcsoMglg*NgqVwN1JSbezwnZ9b6PYNg")
title <- conde_nast %>%
html_nodes(".s12:nth-child(2)") %>%
html_text() %>%
readr::parse_character()
salary <- conde_nast %>%
html_nodes(".s13:nth-child(3)") %>%
html_text() %>%
readr::parse_number(na = c("", NA))
race <- conde_nast %>%
html_nodes(".s12:nth-child(4)") %>%
html_text() %>%
readr::parse_character()
gender <- conde_nast %>%
html_nodes(".s12:nth-child(5)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
sex_orien <- conde_nast %>%
html_nodes(".s12:nth-child(6)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
status <- conde_nast %>%
html_nodes(".s12:nth-child(7)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
yrs_role <- conde_nast %>%
html_nodes(".s13:nth-child(8)") %>%
html_text() %>%
readr::parse_number(na = c("", "NA"))
yrs_exp <- conde_nast %>%
html_nodes(".s13:nth-child(9)") %>%
html_text() %>%
readr::parse_character(na = c("", "NA"))
yrs_exp
rm(list=ls())
library('dplyr')
library('tidyr')
library('rvest')
library('ggplot2')
library('tidyverse')
setwd("/Users/michaelgibson/Documents/GitHub/Conde-Naste")
conde_nast <- read_html("https://docs.google.com/spreadsheets/u/1/d/1YqdJCJ3LmtVIzxsgOj-YhE8fGBQ3zhuEkWp-_og2HEE/htmlview?pru=AAABcsoMglg*NgqVwN1JSbezwnZ9b6PYNg")
# read in HTML data
tbls_xml <- readHTMLTable(c_nast)
rm(list=ls())
library('dplyr')
library('tidyr')
library('rvest')
library('ggplot2')
library('tidyverse')
library("XML")
setwd("/Users/michaelgibson/Documents/GitHub/Conde-Naste")
conde_nast <- read_html("https://docs.google.com/spreadsheets/u/1/d/1YqdJCJ3LmtVIzxsgOj-YhE8fGBQ3zhuEkWp-_og2HEE/htmlview?pru=AAABcsoMglg*NgqVwN1JSbezwnZ9b6PYNg")
# read in HTML data
tbls_xml <- readHTMLTable(c_nast)
install.packages("XML")
rm(list=ls())
library('dplyr')
library('tidyr')
library('rvest')
library('ggplot2')
library('tidyverse')
library("XML")
setwd("/Users/michaelgibson/Documents/GitHub/Conde-Naste")
conde_nast <- read_html("https://docs.google.com/spreadsheets/u/1/d/1YqdJCJ3LmtVIzxsgOj-YhE8fGBQ3zhuEkWp-_og2HEE/htmlview?pru=AAABcsoMglg*NgqVwN1JSbezwnZ9b6PYNg")
# read in HTML data
tbls_xml <- readHTMLTable(c_nast)
rm(list=ls())
library('dplyr')
library('tidyr')
library('rvest')
library('ggplot2')
library('tidyverse')
library("XML")
setwd("/Users/michaelgibson/Documents/GitHub/Conde-Naste")
conde_nast <- read_html("https://docs.google.com/spreadsheets/u/1/d/1YqdJCJ3LmtVIzxsgOj-YhE8fGBQ3zhuEkWp-_og2HEE/htmlview?pru=AAABcsoMglg*NgqVwN1JSbezwnZ9b6PYNg")
# read in HTML data
tbls_xml <- readHTMLTable(conde_nast)
rm(list=ls())
library('dplyr')
library('tidyr')
library('rvest')
library('ggplot2')
library('tidyverse')
library("XML")
setwd("/Users/michaelgibson/Documents/GitHub/Conde-Naste")
conde_nast <- read_html("https://docs.google.com/spreadsheets/u/1/d/1YqdJCJ3LmtVIzxsgOj-YhE8fGBQ3zhuEkWp-_og2HEE/htmlview?pru=AAABcsoMglg*NgqVwN1JSbezwnZ9b6PYNg")
# read in HTML data
tabs <- html_nodes(conde_nast, xpath = "//li")
tab_df <- data.frame(name = tabs %>% html_text,
css = paste0("#", gsub("\\D", "", html_attr(tabs, "id"))),
stringsAsFactors = FALSE)
View(tabs)
tbls <- html_nodes(conde_nast, "table")
tab_df <- data.frame(name = tbls %>% html_text,
css = paste0("#", gsub("\\D", "", html_attr(tabs, "id"))),
stringsAsFactors = FALSE)
View(tab_df)
tbls <- html_nodes(conde_nast)
help(html_nodes)
install.packages("magrittr")
install.packages("googlesheets4")
rm(list=ls())
library('dplyr')
library('tidyr')
library('rvest')
library('ggplot2')
library('tidyverse')
library("XML")
library("magrittir")
library("googlesheets4")
library("googlesheets4")
setwd("/Users/michaelgibson/Documents/GitHub/Conde-Naste")
conde_nast <- read_html("https://docs.google.com/spreadsheets/u/1/d/1YqdJCJ3LmtVIzxsgOj-YhE8fGBQ3zhuEkWp-_og2HEE/htmlview?pru=AAABcsoMglg*NgqVwN1JSbezwnZ9b6PYNg")
gs4_browse("https://docs.google.com/spreadsheets/u/1/d/1YqdJCJ3LmtVIzxsgOj-YhE8fGBQ3zhuEkWp-_og2HEE/htmlview?pru=AAABcsoMglg*NgqVwN1JSbezwnZ9b6PYNg")
range_speedread("https://docs.google.com/spreadsheets/u/1/d/1YqdJCJ3LmtVIzxsgOj-YhE8fGBQ3zhuEkWp-_og2HEE/htmlview?pru=AAABcsoMglg*NgqVwN1JSbezwnZ9b6PYNg")
rm(list=ls())
library('dplyr')
library('tidyr')
library('rvest')
library('ggplot2')
library('tidyverse')
library("XML")
library("googlesheets4")
setwd("/Users/michaelgibson/Documents/GitHub/Conde-Naste")
conde_nast <- read_html("https://docs.google.com/spreadsheets/u/1/d/1YqdJCJ3LmtVIzxsgOj-YhE8fGBQ3zhuEkWp-_og2HEE/htmlview?pru=AAABcsoMglg*NgqVwN1JSbezwnZ9b6PYNg")
gs4_browse("https://docs.google.com/spreadsheets/u/1/d/1YqdJCJ3LmtVIzxsgOj-YhE8fGBQ3zhuEkWp-_og2HEE/htmlview?pru=AAABcsoMglg*NgqVwN1JSbezwnZ9b6PYNg")
range_speedread("https://docs.google.com/spreadsheets/u/1/d/1YqdJCJ3LmtVIzxsgOj-YhE8fGBQ3zhuEkWp-_og2HEE/htmlview?pru=AAABcsoMglg*NgqVwN1JSbezwnZ9b6PYNg")
cnast<-range_read("https://docs.google.com/spreadsheets/u/1/d/1YqdJCJ3LmtVIzxsgOj-YhE8fGBQ3zhuEkWp-_og2HEE/htmlview?pru=AAABcsoMglg*NgqVwN1JSbezwnZ9b6PYNg")
View(cnast)
